Group_28
10.05.2022
Postman_tests

PyCharm

*** ТОКЕН
Создаем запрос Login
POST
http://162.55.220.72:5005/login
В body прописываем ключи
name Alexey
password 3432243

Отправляем
Получаем:
{
    "token": "/s34lfgbj/None/jjd909/72980kjkWpqc898None334890evny"
}

Теперь этот токен нужно автоматически забрать и передать в следующий запрос.

Пока сделаем вручную.
Запрос, который у нас требует токен (в коде Pyton)
@app.route('/test_pet_info', methods=['GET', 'POST'])
Т.е.:
test_pet_info

Создаем реквест test_pet_info
POST
http://162.55.220.72:5005/test_pet_info
Body, form-data:
name Mojo
age 3
weight 8

Здесь нам нужен еще и токен.
Если отправить запрос без него, то получим ошибку 500.
В form-data добавляем ключ: auth_token 
Вместо значения встявляем предыдущий токен:
"/s34lfgbj/None/jjd909/72980kjkWpqc898None334890evny"

Сервер должен вернуть результат:
{
    "age": 3,
    "daily_food": 0.096,
    "daily_sleep": 20.0,
    "name": "Mojo"
}

Если токен был с ошибкой в имени пользователя, то сервер вернет текст ошибки:
"Invalid token. Sign in please"

Вот таким образом мы пальцами передали токен.

18:00 остановился


*** СКРИПТЫ. 
А теперь поработаем с коружением и посмотрим как это все делать скриптами.

*** ОКРУЖЕНИЕ.
Окружение - это такая область памяти, в которую мы можем класть значение и из которой можем эти значения доставать. Эта область вполне настраиваемая.

Слева в колонке меню заходим в Environments
Жмем New
Называем group_28
Вписываем переменную token
Type оставляем default
Остальное оставляем пустым
Жмем сохранить

Заходим во вкладку Collection
В верхнеп правом углу возле иконки "глаз" во всплывающем меню выбираем нужный Environment (окружение) - group_28.
Теперь данная коллекция будет работать с этим окружением.
Чтобы посмотреть что есть в окружении, жмем иконку "глаз".
На данный момент можно увидеть только переменную пустую переменную "token".
В Globals (глобальном окружении) пока ничего нет.
Пока открыто окно просмотра переменных окружения, можно нажать Edit для редактирования переменной.
Чтобы закрыть редактирование переменной окружения надо просто нажать крестик во вкладке окна, рядом со вкладками запросов.

*** СНИППЕТЫ.
Переходим в запрос Login
Открываем вклаку Tests
Под словом Cookies жмем на стрелочку
Выбираем сниппет Set an environment variable
В окне Tests появится строка:
pm.environment.set("variable_key", "variable_value");



















